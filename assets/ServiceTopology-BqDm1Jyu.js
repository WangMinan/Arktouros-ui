import{a as C,b as D,__tla as N}from"./index-B4G372lx.js";import{i as P}from"./echarts-DvxK4-OB.js";import{b as R}from"./@vueuse-qYD7ovze.js";import{_ as q,__tla as F}from"./index-p21n5RID.js";import{r as g,b as T,D as G,w as H,c as M,V as a,P as l,a as m,ah as r,o as J,ax as K,ay as Q}from"./@vue-CM_iQ-Ml.js";import"./axios-B4uVmeYG.js";import"./nprogress-D09IqNcY.js";import"./dayjs-Cdlb6j_n.js";import{__tla as W}from"./element-plus-BSv_B6C1.js";import"./lodash-es-D0J8aJCM.js";import"./@element-plus-CGk3rl86.js";import"./@popperjs-CsO2-mKt.js";import"./@ctrl-r5W6hzzQ.js";import"./async-validator-BTg-XjMW.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-B_wA2iF0.js";import"./tslib-BDyQ-Jie.js";import"./zrender-B3govljg.js";import"./pinia-D0gUakoB.js";import"./vue-router-D7o4f_GN.js";import"./pinia-plugin-persistedstate-Bts6f1YT.js";let I,X=Promise.all([(()=>{try{return N}catch{}})(),(()=>{try{return F}catch{}})(),(()=>{try{return W}catch{}})()]).then(async()=>{let c,v,y,b,h,w,O,k;c=u=>(K("data-v-9e4e02aa"),u=u(),Q(),u),v={class:"topology-container"},y=c(()=>m("a",{href:"/main"},"\u4E3B\u9875",-1)),b=c(()=>m("a",{href:"/main/topology"},"\u670D\u52A1\u62D3\u6251",-1)),h={class:"search-bar"},w={class:"card-container"},O=c(()=>m("div",{id:"service-topology-dom"},null,-1)),k={__name:"ServiceTopology",setup(u){const d=g(""),V=async(t,i)=>{const o=await C(t);if(o===null)return;const e=o.result.map(_=>({value:_}));i(e)},j=g([]),z=g([]),E=async()=>{const t=await D(d.value),i=t.result.nodes;j.value=i.map(e=>e.nodeObject!==null?{draggable:!0,name:e.nodeObject.name,category:e.nodeObject.nodeName,symbolSize:[50,50]}:null);const o=t.result.calls;z.value=o.map(e=>e.source===null||e.target===null?null:{source:e.source.nodeObject.name,target:e.target.nodeObject.name})};let p;T(async()=>{await E(),S(),window.addEventListener("resize",f),p=new ResizeObserver(()=>f),p.observe(document.getElementById("service-topology-dom"))}),G(()=>{window.removeEventListener("resize",f),p.disconnect()});let n;const s=R("theme-appearance","auto"),S=()=>{n&&n.dispose();let t={backgroundColor:s.value==="dark"?"#212224":"#fff",title:{text:"\u670D\u52A1\u5173\u7CFB\u56FE"},tooltip:{trigger:"item",triggerOn:"mousemove",backgroundColor:s.value==="dark"?"#212224":"#fff",textStyle:{color:s.value==="dark"?"#fff":"#212224"}},label:{normal:{show:!0,position:"inside"}},series:[{type:"graph",edgeSymbol:["none","arrow"],focusNodeAdjacency:!0,roam:!0,layout:"force",symbol:"circle",data:j.value,links:z.value,label:{normal:{show:!0,position:"inside"}},force:{repulsion:200,edgeLength:100,layoutAnimation:!0},animationEasingUpdate:"quinticInOut",animationDurationUpdate:100}]};n=P(document.getElementById("service-topology-dom"),s.value==="dark"?"dark":"light"),n.setOption(t)},f=()=>{n&&n.resize()};return H(s,()=>{S()}),(t,i)=>{const o=r("el-breadcrumb-item"),e=r("el-breadcrumb"),_=r("el-row"),x=r("Filter"),A=r("el-icon"),L=r("el-autocomplete"),U=r("el-card");return J(),M("div",v,[a(_,null,{default:l(()=>[a(e,{"separator-icon":"ArrowRight"},{default:l(()=>[a(o,null,{default:l(()=>[y]),_:1}),a(o,null,{default:l(()=>[b]),_:1})]),_:1})]),_:1}),m("div",h,[a(L,{class:"auto-complete-input",modelValue:d.value,"onUpdate:modelValue":i[0]||(i[0]=B=>d.value=B),"fetch-suggestions":V,clearable:"",placeholder:"\u8BF7\u9009\u62E9\u547D\u540D\u7A7A\u95F4--\u9ED8\u8BA4\u4E3Adefault",onSelect:E,style:{width:"40%"}},{prepend:l(()=>[a(A,null,{default:l(()=>[a(x)]),_:1})]),_:1},8,["modelValue"])]),m("div",w,[a(U,null,{default:l(()=>[O]),_:1})])])}}},I=q(k,[["__scopeId","data-v-9e4e02aa"]])});export{X as __tla,I as default};
