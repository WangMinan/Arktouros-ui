import{a as E,b as N,__tla as q}from"./index-C6HjEeQ9.js";import{g as _,j as z,C as B,D as F,G,n as T,l as e,w as o,k as r,r as n,o as K,q as L,u as M,__tla as P}from"./.pnpm-BUSZVuX4.js";import{_ as R,__tla as H}from"./index-1_e2lE3f.js";let S,J=Promise.all([(()=>{try{return q}catch{}})(),(()=>{try{return P}catch{}})(),(()=>{try{return H}catch{}})()]).then(async()=>{let c,f,g,y,v,b,h,w;c=u=>(L("data-v-e091c7a4"),u=u(),M(),u),f={class:"topology-container"},g=c(()=>r("a",{href:"/main"},"\u4E3B\u9875",-1)),y=c(()=>r("a",{href:"/main/topology"},"\u670D\u52A1\u62D3\u6251",-1)),v={class:"search-bar"},b={class:"card-container"},h=c(()=>r("div",{id:"service-topology-dom"},null,-1)),w={__name:"ServiceTopology",setup(u){const d=_(""),U=async(t,s)=>{const l=await E(t);if(l===null)return;const a=l.result.map(p=>({value:p}));s(a)},O=_([]),j=_([]),k=async()=>{const t=await N(d.value),s=t.result.nodes;O.value=s.map(a=>a.nodeObject!==null?{draggable:!0,name:a.nodeObject.name,category:a.nodeObject.nodeName,symbolSize:[50,50]}:null);const l=t.result.calls;j.value=l.map(a=>a.source===null||a.target===null?null:{source:a.source.nodeObject.name,target:a.target.nodeObject.name})};z(async()=>{await k(),I()});let i;const m=B("theme-appearance","auto"),I=()=>{let t={backgroundColor:m.value==="dark"?"#212224":"#fff",title:{text:"\u670D\u52A1\u5173\u7CFB\u56FE",left:"3%",top:"3%"},label:{normal:{show:!0,position:"inside"}},series:[{type:"graph",focusNodeAdjacency:!0,roam:!0,layout:"force",symbol:"circle",data:O.value,links:j.value,label:{normal:{show:!0,position:"inside"}},animationEasingUpdate:"quinticInOut",animationDurationUpdate:100}]};i=F(document.getElementById("service-topology-dom"),m.value==="dark"?"dark":"light"),i.setOption(t)};return G(m,()=>{i&&i.dispose(),I()}),(t,s)=>{const l=n("el-breadcrumb-item"),a=n("el-breadcrumb"),p=n("el-row"),V=n("Filter"),x=n("el-icon"),A=n("el-autocomplete"),C=n("el-card");return K(),T("div",f,[e(p,null,{default:o(()=>[e(a,{"separator-icon":"ArrowRight"},{default:o(()=>[e(l,null,{default:o(()=>[g]),_:1}),e(l,null,{default:o(()=>[y]),_:1})]),_:1})]),_:1}),r("div",v,[e(A,{class:"auto-complete-input",modelValue:d.value,"onUpdate:modelValue":s[0]||(s[0]=D=>d.value=D),"fetch-suggestions":U,clearable:"",placeholder:"\u8BF7\u9009\u62E9\u547D\u540D\u7A7A\u95F4--\u9ED8\u8BA4\u4E3Adefault",onSelect:k,style:{width:"40%"}},{prepend:o(()=>[e(x,null,{default:o(()=>[e(V)]),_:1})]),_:1},8,["modelValue"])]),r("div",b,[e(C,null,{default:o(()=>[h]),_:1})])])}}},S=R(w,[["__scopeId","data-v-e091c7a4"]])});export{J as __tla,S as default};
